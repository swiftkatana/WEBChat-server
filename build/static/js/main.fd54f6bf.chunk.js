(this.webpackJsonpclint=this.webpackJsonpclint||[]).push([[0],{104:function(e,t){t.state="dev",t.productionIp=""},105:function(e,t){t.responedList={DBError:"DBError",infoInvalid:"infoInvalid",route:"koral | Michael you send me bad request! ",FaildSave:"FaildSave",loginFaildAlreadyConnect:"loginFaildAlreadyConnect",UserIsAlreadyCreated:"UserIsAlreadyCreated",UserNotCreated:"UserNotCreated",companyNameExists:"companyNameExists",usersNotFound:"usersNotFound",emailNotExistsL:"emailIsFake",NotExists:"NotExists",isInUse:"isInUse"}},176:function(e,t,a){e.exports=a(311)},230:function(e,t){},234:function(e,t,a){},235:function(e,t,a){},311:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),s=a.n(o),i=a(13),l=a(47),c=a(148),u=(a(113),a(166)),d=a(15),p=a(18),m=a.n(p),g=a(26),h=a(40),f=a(41),E=a(45),b=a(43),y=a(366),v=a(345),w=a(153),O=a(348),k=a(349),C=a(157),S=a(20),N=Object(S.b)(),x=function(e){N.location.pathname!==e&&N.push(e)},j=N,L=a(149),A=a.n(L),F=a(104),I="dev"===F.state?"http://84.108.76.83:1029":F.productionIp,T=A.a.create({baseURL:I},{headers:{"Access-Control-Allow-Origin":"*"}}),R=a(150),_=new(a.n(R).a)(I),U=a(65),D=a.n(U),q=a(105),H=function(e){return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.post("/api/chat/getChat",{chatId:e});case 2:if(n=t.sent,!(r=n.data).err){t.next=10;break}return console.log(r),alert(r.err),t.abrupt("return");case 10:a({type:"OPEN_CHAT",payload:r}),x("/chat");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(e){return{type:"UPDATE_STATUS_FRIEND",payload:e}},B=function(e){return{type:"NEW_FRIEND",payload:e}},G=function(e){return function(){var t=Object(g.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.post(D.a.userGetChatsUrl,{ids:e}).catch((function(e){return q.responedList.DBError})).then((function(e){return e.data}));case 2:!(n=t.sent)||n.err||"DBError"===n?console.log("error"):a({type:"FETCH_CHATS",payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};var M=a(369),W=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={users:[],filterUsers:[],query:"",idForTheClock:""},e.getAllUsers=Object(g.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.user&&e.props.isLogin){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,T.post("/api/user/getUserForSerach",{sender:e.props.user});case 4:a=t.sent,console.log(a),e.setState({users:a.data});case 7:case"end":return t.stop()}}),t)}))),e.onClickSendReq=function(t){T.post("/api/user/addnewfriend",{geter:t,sender:e.props.user})},e.filterUsersForSerach=function(t){var a=!0;return new RegExp("^"+e.state.query).test(t.email)||(a=!1),e.props.user._id===t._id&&(a=!1),e.props.user.connections[t._id]&&(a=!1),a},e.cancelOrStartTheClock=function(){e.state.idForTheClock&&(console.log("clear"),clearTimeout(e.state.idForTheClock),e.setState({idForTheClock:""}));var t=setTimeout((function(){var t=e.state.users.filter((function(t){return e.filterUsersForSerach(t)}));e.setState({filterUsers:t}),console.log("start")}),200);e.setState({idForTheClock:t})},e.onChangText=function(t){e.setState({query:t.target.value}),e.cancelOrStartTheClock()},e.renderUsersList=function(){return e.state.filterUsers?e.state.filterUsers.map((function(t){return r.a.createElement(y.a.Item,{key:t._id,className:"row"},r.a.createElement(v.a,null,r.a.createElement(w.a,{xs:"4"},r.a.createElement(M.a,{alt:"profile",src:t.imageProfile,style:{fontSize:30}})),r.a.createElement(w.a,{xs:"7"},r.a.createElement("p",null,"".concat(t.firstName," ").concat(t.email))),r.a.createElement(w.a,{xs:"1"},r.a.createElement(M.a,{className:"imgLeg imageAddFri",onClick:function(){return e.onClickSendReq(t)},alt:"add button",src:"addFriend.png",style:{fontSize:30}}))))})):null},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.props.user&&this.props.isLogin||x("/"),this.getAllUsers()}},{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement(k.a,{className:"mb-2 mr-sm-2"},r.a.createElement(C.a,{value:this.state.query,onChange:this.onChangText,id:"inlineFormInputGroupUsername2",placeholder:"email"}),r.a.createElement(k.a.Prepend,null,r.a.createElement(k.a.Text,null,"@"))),r.a.createElement(y.a,null,this.renderUsersList()))}}]),a}(r.a.Component),K=Object(i.b)((function(e){return{user:e.user,isLogin:e.auth.isLogin}}),{add_Friend:B})(W),z=a(68),X=a(19),Y=a(24),V=a(6),J=a(350),Z=a(31),$=a(363),Q=a(353),ee=a(354),te=a(355),ae=a(360),ne=a(87),re=a(359),oe=a(356),se=a(158),ie=a.n(se),le=a(159),ce=a.n(le),ue=a(160),de=a.n(ue),pe=a(370),me=a(351),ge=a(352),he=a(358),fe=Object(J.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{alignItems:"center",width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(6)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(Y.a)(Object(Y.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(2),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}));var Ee=Object(i.b)((function(e){return{user:e.user,language:e.language}}),{changeLeg:function(e){return{type:"CHANGE_LEGUAGE",payload:e}},createCHAT:function(e){return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.post("/api/chat/createchat",e);case 2:n=t.sent,r=n.data,console.log(r),a({type:"CREATE_CHAT",payload:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},openChat:H,deleteChat:function(e){return function(t){T.delete("/chat/delete/".concat(e)),t({type:"DELETE_CHAT",payload:e}),setTimeout((function(){x("/")}),40)}},fetchChats:G,signOut:function(){return{type:"SIGN_OUT"}}})((function(e){for(var t=e.user,a=e.children,n=e.language,o=e.changeLeg,s=arguments.length,i=new Array(s>1?s-1:0),l=1;l<s;l++)i[l-1]=arguments[l];var c=fe(),u=Object(Z.a)(),d=r.a.useState(!0),p=Object(X.a)(d,2),m=p[0],g=p[1],h=document.querySelector("#root");h.addEventListener("touchstart",b,!1),h.addEventListener("touchmove",y,!1);var f=null,E=null;function b(e){f=e.touches[0].clientX,E=e.touches[0].clientY}function y(e){if(null!==f&&null!==E){var t=e.touches[0].clientX,a=e.touches[0].clientY,n=f-t,r=E-a;Math.abs(n)>Math.abs(r)&&(n>0?w():v()),f=null,E=null,e.preventDefault()}}var v=function(){g(!0)},w=function(){g(!1)},O=function(e){i.openChat(e)},k=function(){return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{onClick:function(){return x("/profile")},button:!0,key:"profile buuton"},r.a.createElement(me.a,null,r.a.createElement("img",{className:"fa fa-plus-circle",src:i.user.imageProfile,alt:"profile button"})," "),r.a.createElement(ge.a,{primary:i.user.firstName})),r.a.createElement(pe.a,{onClick:function(){x("/"),i.signOut(i.user.email)},button:!0,key:"LogOut buuton"},r.a.createElement(me.a,null,r.a.createElement("img",{className:"fa fa-plus-circle",src:"logOut.png",alt:"logOut button"})," "),r.a.createElement(ge.a,{primary:"LogOut"}))):r.a.createElement(pe.a,{onClick:function(){x("/")},button:!0,key:"login buuton"},r.a.createElement(me.a,null,r.a.createElement("img",{className:"fa fa-plus-circle",src:I+"/login.png",alt:"login button"})," "),r.a.createElement(ge.a,{primary:"".concat(n.texts.loginRegisterScreen.login.button," / ").concat(n.texts.loginRegisterScreen.register.button)}))},C=function(){return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{onClick:function(){return x("addFrind")},button:!0,key:"addFrind"},r.a.createElement(me.a,null,r.a.createElement("img",{className:"fa fa-plus-circle",src:"serachF.png",alt:"addFrind button"})," "),r.a.createElement(ge.a,{primary:"Serach A Frined"})),r.a.createElement(pe.a,{onClick:function(){return x("friends.list")},button:!0,key:"friends.list"},r.a.createElement(me.a,null,r.a.createElement("img",{className:"fa fa-plus-circle",src:"friendsList.png",alt:"friends.list button"})," "),r.a.createElement(ge.a,{primary:"friends list"}))):null},S=function(){return t&&t.friends?Object.values(t.friends).map((function(e){return r.a.createElement(pe.a,{onClick:function(){return O(e.chatId)},button:!0,key:e._id},r.a.createElement("img",{src:e.imageProfile,alt:"profile "}),r.a.createElement(ge.a,{primary:"".concat(e.firstName," ").concat(e.lastName)}))})):null},N=function(){var e=n.languages.filter((function(e){return e!==n.langNow}));return r.a.createElement("img",{src:"".concat(I,"/").concat(e[0],".png"),onClick:function(){return o(e[0])},className:"imgLeg",alt:"icon for change leg right now hebrew"})};return r.a.createElement("div",{className:" ".concat("English"===n.langNow?"textLeft":"textRight"," ").concat(c.root," ")},r.a.createElement(Q.a,null),r.a.createElement(ee.a,{position:"fixed",className:Object(V.a)(c.appBar,Object(z.a)({},c.appBarShift,m))},r.a.createElement(te.a,null,r.a.createElement(ne.a,{variant:"h6",noWrap:!0}),r.a.createElement(oe.a,{color:"inherit","aria-label":"open drawer",onClick:v,edge:"start",className:Object(V.a)(c.menuButton,m&&c.hide)},r.a.createElement(ie.a,null)))),r.a.createElement($.a,{className:c.drawer,variant:"persistent",anchor:"left",open:m,classes:{paper:c.drawerPaper}},r.a.createElement("div",{className:c.drawerHeader},r.a.createElement(oe.a,{onClick:w},"ltr"===u.direction?r.a.createElement(ce.a,null):r.a.createElement(de.a,null))),r.a.createElement(he.a,{variant:"contained",id:"CWE",onClick:function(){if("/"===j.location.pathname)return null;x("")}},"CWE"),r.a.createElement(re.a,null),r.a.createElement(ae.a,null,k(),r.a.createElement(re.a,null)),r.a.createElement(ae.a,null,C()),r.a.createElement(ae.a,null,S()),N()),r.a.createElement("main",{className:Object(V.a)(c.content,Object(z.a)({},c.contentShift,m))},r.a.createElement("div",{className:c.drawerHeader}),a))})),be=a(362),ye=a(368),ve=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={show:!1,whatKind:"",body:"",lastFriendReq:{},newReqSound:new Audio("newReq.mp3")},e.setListenerSocket=function(){e.props.isLogin&&e.props.user?(_.connected||_.connect(),_.on("userLive"+e.props.user._id,(function(t){var a=t.type,n=t.data;switch(a){case"newFriendReq":console.log("friend"),"sender"===n.status&&(e.state.newReqSound.play(),e.setState({lastFriendReq:n,show:!0,whatKind:"newFriendreq",body:n.firstName+" "+n.lastName})),e.props.add_Friend(n);break;case"firendReqAccept":"accept"===n.status&&(e.state.newReqSound.play(),e.setState({lastFriendReq:n,show:!0,whatKind:"newFriendreq",body:n.firstName+" "+n.lastName})),e.props.updatefriend({_id:n._id,status:"accept",chatId:n.chatId,user:n,chat:n.chat});break;case"deleteFriend":console.log("delete"),e.props.deleteFriend(n);break;case"declineFriendReq":console.log("decline"),e.props.deleteFriend(n);break;case"blockFriendReq":console.log("block"),e.props.updatefriend({_id:n._id,user:n,status:"decline"});break;case"message":e.props.addMessage(n),console.log("got a message");break;default:alert(n)}}))):!e.state.id||e.props.isLogin||e.props.user||_.off()},e.onClickDeclineReq=function(t){e.setState({show:!1}),T.post("/api/user/declineFriendReq",{sender:e.props.user,geter:t})},e.onClickAcceptReq=function(){var t=Object(g.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({show:!1}),t.next=3,T.post("/api/user/friendreqaccept",{accepter:e.props.user,sender:a});case 3:n=t.sent,alert(n.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onShowOrHide=function(){e.setState({show:!e.state.show})},e.renderModal=function(){if(!e.state.show)return null;var t,a,n,o,s,i;switch(e.state.whatKind){case"error":o="close",s="error",i=e.state.body,a=function(){return e.onShowOrHide()};break;case"newFriendReq":console.log(e.state.lastFriendReq),n="Accept",o="Decline",s="you got new friend request",i="your new friend request send from ".concat(e.state.body," "),t=function(){e.onClickAcceptReq(e.state.lastFriendReq)},a=function(){e.onClickDeclineReq(e.state.lastFriendReq)};break;case"friendReqAccept":o="close",s="you Got Accept",i=" ".concat(e.state.body," accept your friend request \ud83d\ude0e "),a=function(){return e.onShowOrHide()}}return r.a.createElement(be.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:e.state.show,onHide:e.onShowOrHide},r.a.createElement(be.a.Header,{closeButton:!0},r.a.createElement(be.a.Title,null,s)),r.a.createElement(be.a.Body,null,i),r.a.createElement(be.a.Footer,null,n?r.a.createElement(ye.a,{variant:"secondary",onClick:t},n):null,o?r.a.createElement(ye.a,{variant:"danger",onClick:a},o):null))},e}return Object(f.a)(a,[{key:"componentDidUpdate",value:function(){this.setListenerSocket()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderModal())}}]),a}(r.a.Component),we=(Object(i.b)((function(e){return{user:e.user}}),{add_Friend:B,updatefriend:P,deleteFriend:function(e){return{type:"DELETE_FRIEND",payload:e}},addMessage:function(e){return{type:"ADD_MESSAGE",payload:e}}})(ve),function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).renderName=function(){return e.props.user&&e.props.isLogin?e.props.user.firstName:null},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.props.user&&this.props.isLogin||x("/")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Hello ",this.renderName()," "))}}]),a}(r.a.Component)),Oe=Object(i.b)((function(e){return{isLogin:e.auth.isLogin,user:e.user}}),{})(we),ke=a(361),Ce=a(367);var Se=function(e){var t=e.friend,a=e.buttons;return r.a.createElement(y.a.Item,{className:"row"},r.a.createElement(v.a,null,r.a.createElement(w.a,{xs:"4"},r.a.createElement(M.a,{alt:"profile",src:t.imageProfile,style:{fontSize:30}})),r.a.createElement(w.a,{xs:"5"},r.a.createElement("p",null,"".concat(t.firstName," ").concat(t.email))),r.a.createElement(w.a,{xs:"3"},"waiting"!==t.status?r.a.createElement(ke.a,{key:t._id,item:!0},a.map((function(e){return r.a.createElement(Ce.a,{onClick:function(){return e.onClick(t)},key:e.title,title:e.title},r.a.createElement(ye.a,null,e.text))}))):r.a.createElement(Ce.a,{key:"waiting",title:"waiting for "+t.firstName+" to response"},r.a.createElement(ye.a,null,"Pending")))))};function Ne(e){var t=e.whatKindOfList,a=e.friends,n=e.buttons,o=e.friendsListHeader;return function(e){var s=[];return a.length>0&&a.map((function(e){return-1===t.indexOf(e.status)?null:s.push(r.a.createElement(Se,{key:e._id,friend:e,buttons:n}))})),s.length>0?r.a.createElement("div",null,r.a.createElement("h3",{className:"friendsListHeader"},o),s):null}()}var xe=Object(i.b)((function(e){return{user:e.user,isLogin:e.auth.isLogin}}),{updatefriend:P,openChat:H})((function(e){var t=function(t){console.log("delete"),T.post("/api/user/deletefriendreq",{sender:e.user,geter:t})},a=function(t){T.post("/api/user/blockfriendreq",{sender:e.user,geter:t})},n=[{onClick:function(t){e.openChat(t.chatId)},text:"Open Chat",title:"Open Chat"},{onClick:t,text:"Delete",title:"Delete Friend"},{onClick:a,text:"Block",title:"Block A Friend"}],o=[{onClick:a,text:"Block",title:"Block Request"},{onClick:function(t){T.post("/api/user/friendreqaccept",{sender:e.user,geter:t})},text:"Accept",title:"Accept Request"},{onClick:t,text:"Decline",title:"Decline Request"}],s=[{onClick:function(t){T.post("/api/user/unblockFirend",{sender:e.user,geter:t})},text:"UnBlock",title:"UnBlock A Friend"}];return r.a.createElement(O.a,null,function(){if(e.isLogin&&e.user){var t=Object.values(e.user.connections);return r.a.createElement("div",null,r.a.createElement(Ne,{friends:t,friendsListHeader:"Friends",buttons:n,whatKindOfList:["accept","iaccept"]}),r.a.createElement(Ne,{friends:t,friendsListHeader:"Pendding Friends",buttons:o,whatKindOfList:["waiting","sender"]}),r.a.createElement(Ne,{friends:t,friendsListHeader:"Dark List",buttons:s,whatKindOfList:["iblock"]}))}return r.a.createElement("h1",null,"Please logIng Or Register")}())})),je=(a(234),Object(i.b)((function(e){return{user:e.user}}),{})((function(e){var t=function(t,a){return t===e.user.email?a:{}};return r.a.createElement("div",{id:"chat-window"},r.a.createElement("div",{id:"output"},r.a.createElement("div",null,e.mesagesArr.map((function(e,a){return r.a.createElement("div",{key:e.message+a,"aria-live":"polite","aria-atomic":"true",style:{position:"relative",minHeight:"100px"}},r.a.createElement("div",{style:t(e.senderId,{textAlign:"right",position:"absolute",top:0,right:0,minWidth:"100px"}),id:"body-message"},r.a.createElement("div",{style:t(e.senderId,{backgroundColor:"#b5f66f"}),id:"message"},r.a.createElement("p",{id:"textMessage"},e.message)),r.a.createElement("small",null," ","".concat(function(e){var t=new Date;switch(e=new Date(e),Math.floor((t-e)/864e5)){case 0:return"today";case 1:return"Yesterday";case 2:return"3 days ago";default:return"".concat(e.d,"/").concat(e.m,"/").concat(e.y)}}(e.createTime.date)," at ").concat(e.createTime.time," by ").concat(e.senderName)," ")))}))),e.scroolDown))})));function Le(){var e=new Date;return console.log(e),e}var Ae=function(e){Object(E.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).scrooDown=function(){return r.a.createElement("div",{id:"hideScrool",style:{float:"left",clear:"both"},ref:function(e){n.scroolDown=e}}," ")},n.scrollToBottom=function(){n.meassgesEnd.scrollIntoView({behavior:"smooth"})},n.addmessage=function(e){console.log(e)},n.onChangeText=function(e){n.setState({meassge:e.currentTarget.value}),_.emit("typeing",e.currentTarget.value?{senderName:n.user.firstName,show:!0,chatId:n.props.chat.chatId}:{senderName:n.user.firstName,show:!1,chatId:n.props.chat.chatId})},n.onEnterPress=function(e){13===e.keyCode&&!1===e.shiftKey&&n.handlerClickMSG(e)},n.handlerClickMSG=function(e){if(e.preventDefault(),!n.state.meassge)return null;n.setState({meassge:""}),_.emit("typeing",{senderName:n.user.firstName,show:!1,chatId:n.props.chat.chatId}),_.emit("message",{message:n.state.meassge,senderName:n.user.firstName,senderId:n.user.email,chatId:n.props.chat.chatId,createTime:{time:(new Date).toLocaleString([],{hour:"2-digit",minute:"2-digit"}),date:Le()}})},n.renderSomeOneIsTypeing=function(){if(n.state.whoIsTypeingNow.length<1)return null;if(1===n.state.whoIsTypeingNow.length)return r.a.createElement("p",null,r.a.createElement("em",null,n.state.whoIsTypeingNow)," is typeing a meassge");var e="";return n.state.whoIsTypeingNow.map((function(t){return e=e+" "+t})),r.a.createElement("p",null,r.a.createElement("em",null,e)," is typeing a meassge")},n.state={meassge:"",meassges:[],whoIsTypeingNow:[],show:!1},n.scroolDown=r.a.createRef(),n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.props.call&&(this.myStream=this.props.call.myStream,this.theirStream=this.props.call.theirStream,this.gotAcall=this.props.call.onCall,this.user=this.props.user)}},{key:"componentDidUpdate",value:function(){this.props.isLogin||x("/")}},{key:"componentWillUnmount",value:function(){_.close("typeing"+this.props.chat.chatId)}},{key:"auto_height",value:function(e){e.style.height="1px",e.style.height=e.scrollHeight+"px"}},{key:"render",value:function(){return this.props.isLogin?this.props.chat.chats[this.props.chat.chatId]?r.a.createElement("div",{id:"mario-chat"},r.a.createElement("div",{id:"feedback"},this.renderSomeOneIsTypeing()),r.a.createElement(je,{user:this.user,mesagesArr:this.props.chat.chats[this.props.chat.chatId].messages}),r.a.createElement("form",{onSubmit:this.handlerClickMSG},r.a.createElement(k.a,{id:"messageinput"},r.a.createElement(k.a.Append,null,r.a.createElement(ye.a,{onClick:this.setUpOffer,id:"buttonCall",style:{backgroundColor:this.state.meassge?"green":"black"},variant:"outline-secondary"},"call")),r.a.createElement(C.a,{onKeyDown:this.onEnterPress,as:"textarea",rows:"1","aria-multiline":!0,autoComplete:"off",onChange:this.onChangeText,value:this.state.meassge,type:"text",placeholder:"type a message"}),r.a.createElement(k.a.Append,null,r.a.createElement(ye.a,{id:"buttonChat",style:{backgroundColor:this.state.meassge?"#575ed8":"#898bce"},type:"submit",variant:"outline-secondary"}))))):(x("/"),r.a.createElement("h1",null,"dsads")):(x("/"),r.a.createElement("h1",null,"erro"))}}]),a}(r.a.Component),Fe=Object(i.b)((function(e){return{call:e.call,user:e.user,isLogin:e.auth.isLogin,chat:e.chatArea,languages:e.languages}}),{})(Ae),Ie=a(365);function Te(e){var t=e.language,a=Object(n.useState)(""),o=Object(X.a)(a,2),s=o[0],i=o[1],l=Object(n.useState)(""),c=Object(X.a)(l,2),u=c[0],d=c[1],p=Object(n.useState)(!0),h=Object(X.a)(p,2),f=h[0],E=h[1],b=Object(n.useState)(""),y=Object(X.a)(b,2),v=y[0],w=y[1],O=function(){var e=Object(g.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),e.next=4,T.get(Object(U.userLoginUrl)(u,s));case 4:a=e.sent,console.log(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),w(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),S=t.texts.loginRegisterScreen;return r.a.createElement(Ie.a,{onSubmit:O},r.a.createElement("h1",{className:"L-R-Leabel"},S.login.leabel),r.a.createElement(Ie.a.Group,{className:"",controlId:"formBasicEmail"},r.a.createElement(Ie.a.Label,null,S.email.leabel),r.a.createElement(Ie.a.Control,{value:s,required:!0,type:"email",onChange:function(e){return i(e.target.value)},placeholder:S.email.placeholder}),r.a.createElement(Ie.a.Text,{className:"text-muted"},S.email.subText)),r.a.createElement(Ie.a.Group,{controlId:"formBasicPassword"},r.a.createElement(Ie.a.Label,null,S.password.leabel),r.a.createElement(k.a,{className:"mb-3"},r.a.createElement(C.a,{value:u,onChange:function(e){return d(e.target.value)},required:!0,type:f?"password":"text",placeholder:S.password.placeholder}),r.a.createElement(k.a.Append,null,r.a.createElement(ye.a,{onClick:function(){return E(!f)},variant:"".concat(f?"primary":"danger")},f?"Show":"Hide"))),v?r.a.createElement(Ie.a.Text,{className:" error"},v):null),r.a.createElement(ye.a,{variant:"primary",type:"submit"},S.login.button))}function Re(e){e.onRegister;var t=e.language,a=Object(n.useState)(""),o=Object(X.a)(a,2),s=o[0],i=o[1],l=Object(n.useState)(""),c=Object(X.a)(l,2),u=c[0],d=c[1],p=Object(n.useState)(""),m=Object(X.a)(p,2),g=m[0],h=m[1],f=Object(n.useState)(""),E=Object(X.a)(f,2),b=E[0],y=E[1],v=t.texts.loginRegisterScreen,w=Object(n.useState)(!0),O=Object(X.a)(w,2),S=O[0],N=O[1];return r.a.createElement(Ie.a,{onSubmit:function(e){e.persist(),new RegExp("^(?=.*d)(?=.*[a-z])(?=.*[A-Z]).{7,32}$").test(u)||y(v.password.error)}},r.a.createElement("h1",{className:"L-R-Leabel"},v.register.leabel),r.a.createElement(Ie.a.Group,{controlId:"formBasicEmail"},r.a.createElement(Ie.a.Label,null,v.email.leabel),r.a.createElement(Ie.a.Control,{value:s,required:!0,type:"email",onChange:function(e){return i(e.target.value)},placeholder:v.email.placeholder}),r.a.createElement(Ie.a.Text,{className:"text-muted"},v.email.subText)),r.a.createElement(Ie.a.Group,{controlId:"formBasicPassword"},r.a.createElement(Ie.a.Label,null,v.password.leabel),r.a.createElement(k.a,{className:"mb-3"},r.a.createElement(C.a,{value:u,onChange:function(e){return d(e.target.value)},required:!0,type:S?"password":"text",placeholder:v.password.placeholder}),r.a.createElement(k.a.Append,null,r.a.createElement(ye.a,{onClick:function(){return N(!S)},variant:"".concat(S?"primary":"danger")},S?"Show":"Hide")))),r.a.createElement(Ie.a.Group,{controlId:"formBasicPassword"},r.a.createElement(Ie.a.Label,null,v.password.leabel2),r.a.createElement(k.a,{className:"mb-3"},r.a.createElement(C.a,{value:g,onChange:function(e){return h(e.target.value)},required:!0,type:S?"password":"text",placeholder:v.password.placeholder2})),b?r.a.createElement(Ie.a.Text,{className:" error"},b):null),r.a.createElement(ye.a,{variant:"primary",type:"submit"},v.register.button))}var _e=Object(i.b)((function(e){return{user:e.user,language:e.language}}),{})((function(e){e.user;var t=e.language.texts.loginRegisterScreen,a=e.language,o=Object(n.useState)(!0),s=Object(X.a)(o,2),i=s[0],l=s[1];return r.a.createElement(O.a,{className:""},r.a.createElement("div",{className:"containerLogin"},i?r.a.createElement(Te,{language:a}):r.a.createElement(Re,{language:a}),r.a.createElement(ye.a,{onClick:function(){return l(!i)},id:"changeModeRL",variant:"primary",size:"lg",block:!0},i?t.register.buttonForRegister:t.login.buttonForLogin)))})),Ue=Object(i.b)((function(e){return{user:e.user}}),{})((function(e){return e.user?r.a.createElement("div",null,r.a.createElement("h1",null,"Main Page Screen")):r.a.createElement(_e,null)})),De=(a(235),Object(i.b)((function(e){return{user:e.user,language:e.language}}),{fetchChats:G})((function(e){e.user,e.fetchChats,e.language;return r.a.createElement(Ee,null,r.a.createElement(u.a,null,r.a.createElement(d.a,{path:"/profile",exact:!0,component:Oe}),r.a.createElement(d.a,{path:"/addFrind",exact:!0,component:K}),r.a.createElement(d.a,{path:"/chat",exact:!0,component:Fe}),r.a.createElement(d.a,{path:"/friends.list",exact:!0,component:xe}),r.a.createElement(d.a,{path:"/",exact:!0,component:Ue})))}))),qe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function He(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Pe=a(364),Be={chats:{},chatId:""},Ge={onCall:!1,myStream:{},thierStream:{}},Me={English:{navBtn:{signIn:"SignIn",signOut:"SignOut",gallery:"Gallery "},loginRegisterScreen:{errorLogin:{infoInvalid:"Email or password not valid please try agian",usersNotFound:"User does not exist ",UserIsAlreadyCreated:"User is already exist",loginFaildAlreadyConnect:"User is already login"},login:{buttonForLogin:"Sgin in",leabel:"Sgin in",button:"Sgin in"},register:{buttonForRegister:" Sign up",leabel:"Sign up",button:"Sign up "},email:{subText:"We'll never share your email with anyone else.. ",placeholder:"Enter Email example@example.com",error:"Invalid email",leabel:"Email"},password:{placeholder:"Password",error:"Your password must include at least 8 characters. At least 1 number And upper case  (like AWDS).  ",leabel:"Password"},firstName:{error:"You must enter a first name without numbers and contain at least 2 characters",leabel:"FirstName"},lastName:{error:"You must enter a last name without numbers and contain at least 2 characters",leabel:"LastName"},address:{error:"Need to enter full address city street number house",leabel:"full address"},phone:{error:"Need to enter phone number",leabel:"Phone number"}}},Hebrew:{navBtn:{signIn:"\u05dc\u05d4\u05ea\u05d7\u05d1\u05e8",signOut:"\u05dc\u05d4\u05ea\u05e0\u05ea\u05e7"},loginRegisterScreen:{errorLogin:{infoInvalid:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05d0\u05d5 \u05d4\u05e1\u05d9\u05e1\u05de\u05d4 \u05dc\u05d0 \u05e0\u05db\u05d5\u05e0\u05d9\u05dd",usersNotFound:"\u05d4\u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05d0 \u05e7\u05d9\u05d9\u05dd ",UserIsAlreadyCreated:"\u05d4\u05de\u05e9\u05ea\u05de\u05e9 \u05db\u05d1\u05e8 \u05e7\u05d9\u05d9\u05dd",loginFaildAlreadyConnect:"\u05d4\u05de\u05e9\u05ea\u05de\u05e9 \u05db\u05d1\u05e8 \u05de\u05d7\u05d5\u05d1\u05e8 \u05d1\u05d1\u05e7\u05e9\u05d4 \u05ea\u05d1\u05d3\u05d5\u05e7 \u05d0\u05dd \u05d9\u05e9 \u05dc\u05da \u05d7\u05dc\u05d5\u05e0\u05d9\u05ea \u05e0\u05d5\u05e1\u05e4\u05ea "},login:{buttonForLogin:" \u05de\u05e9\u05de\u05e9\u05de\u05ea \u05e8\u05e9\u05d5\u05dd",leabel:"\u05dc\u05d4\u05ea\u05d7\u05d1\u05e8 \u05dc\u05d0\u05ea\u05e8",button:"\u05dc\u05d4\u05ea\u05d7\u05d1\u05e8"},register:{buttonForRegister:"  \u05d7\u05d3\u05e9 \u05db\u05d0\u05df",leabel:"\u05d4\u05e8\u05e9\u05de\u05d4 \u05dc\u05d0\u05ea\u05e8",button:"\u05dc\u05d4\u05d9\u05e8\u05e9\u05dd"},email:{subText:'\u05dc\u05e2\u05d5\u05dc\u05dd \u05dc\u05d0 \u05e0\u05e9\u05ea\u05e3 \u05d0\u05ea \u05d4\u05d3\u05d5\u05d0"\u05dc \u05e9\u05dc\u05da \u05e2\u05dd \u05d0\u05e3 \u05d0\u05d7\u05d3 \u05d0\u05d7\u05e8. ',placeholder:"exmaple@example.com \u05d4\u05db\u05e0\u05e1 \u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05dc\u05d3\u05d5\u05d2\u05de\u05d4 ",error:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05d4\u05d9\u05e0\u05d5 \u05ea\u05e7\u05d9\u05df",leabel:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc"},password:{placeholder:"\u05d4\u05db\u05e0\u05e1 \u05e1\u05d9\u05e1\u05de\u05d4 \u05d7\u05d6\u05e7\u05d4 ",error:"\u05d5\u05e1\u05e4\u05e8\u05d5\u05ea (A-Z)\u05d5\u05ea\u05d5 \u05d2\u05d3\u05d5\u05dc (a-z)  \u05e2\u05dc \u05d4\u05e1\u05d9\u05e1\u05de\u05d4 \u05dc\u05d4\u05d9\u05d5\u05ea \u05de\u05d9\u05e0\u05d9\u05de\u05d5\u05dd 7 \u05ea\u05d5\u05d5\u05d9\u05dd \u05d5\u05dc\u05d4\u05db\u05d9\u05dc \u05ea\u05d5\u05d5\u05d9\u05dd  ",leabel:"\u05e1\u05d9\u05e1\u05de\u05d4",leabel2:"\u05d5\u05d9\u05d3\u05d5\u05d9 \u05e1\u05d9\u05e1\u05de\u05d4 ",placeholder2:"\u05d4\u05db\u05e0\u05e1 \u05d0\u05ea \u05d4\u05e1\u05d9\u05e1\u05de\u05d4 \u05e9\u05d9\u05e0\u05d9\u05ea"},firstName:{error:"\u05e6\u05e8\u05d9\u05da \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05e9\u05dd \u05e4\u05e8\u05d8\u05d9 \u05d1\u05dc\u05d9 \u05de\u05e1\u05e4\u05e8\u05d9\u05dd \u05d5\u05dc\u05d4\u05db\u05d9\u05dc 2 \u05ea\u05d5\u05d5\u05d9\u05dd \u05dc\u05e4\u05d7\u05d5\u05ea",leabel:"\u05e9\u05dd \u05e4\u05e8\u05d8\u05d9"},lastName:{error:"\u05e6\u05e8\u05d9\u05da \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4 \u05d1\u05dc\u05d9 \u05de\u05e1\u05e4\u05e8\u05d9\u05dd \u05d5\u05dc\u05d4\u05db\u05d9\u05dc 2 \u05ea\u05d5\u05d5\u05d9\u05dd \u05dc\u05e4\u05d7\u05d5\u05ea",leabel:"\u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4"},address:{error:"\u05e6\u05e8\u05d9\u05da \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05db\u05ea\u05d5\u05d1\u05ea \u05de\u05dc\u05d0\u05d4 \u05e2\u05d9\u05e8 \u05e8\u05d7\u05d5\u05d1 \u05de\u05e1\u05e4\u05e8 \u05d1\u05d9\u05ea",leabel:"\u05db\u05ea\u05d5\u05d1\u05ea \u05de\u05dc\u05d0\u05d4"},phone:{error:"\u05e6\u05e8\u05d9\u05da \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df",leabel:"\u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df"}}}},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{texts:Me.English,langNow:"English",languages:Object.keys(Me)},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LEGUAGE":return{texts:Me[t.payload],langNow:t.payload,languages:Object.keys(Me)};default:return e}},Ke=Object(l.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_USER":case"LOGIN":return t.payload;case"SIGN_OUT":return null;case"NEW_FRIEND":return e.connections[t.payload._id]||(e.connections[t.payload._id]=t.payload),Object(Y.a)({},e);case"UPDATE_STATUS_FRIEND":if(e.connections[t.payload._id]){var a=t.payload,n=a.user,r=a._id;e.connections[r]=n,e.chats[t.payload.chatId]={_id:t.payload.chatId,type:"friend"}}return Object(Y.a)({},e);case"DELETE_FRIEND":return e.connections[t.payload._id]&&delete e.connections[t.payload._id],Object(Y.a)({},e);default:return e}},form:Pe.a,chatArea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CHATS":return t.payload.forEach((function(t){e.chats[t._id]=t})),Object(Y.a)({},e);case"CREATE_CHAT":return e.chats[t.payload._id]=t.payload,Object(Y.a)({},e);case"ADD_MESSAGE":return console.log(t.payload),e.chats[t.payload.chatId].messages.push(t.payload.message),Object(Y.a)({},e);case"OPEN_CHAT":return e.chatId=t.payload._id,Object(Y.a)({},e);case"UPDATE_STATUS_FRIEND":return e.chats[t.payload.chat._id]=t.payload.chat,Object(Y.a)({},e);default:return e}},language:We,call:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dsa":break;default:return e}}}),ze=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||l.d,Xe=Object(l.e)(Ke,ze(Object(l.a)(c.a)));s.a.render(r.a.createElement(i.a,{store:Xe},r.a.createElement(De,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");qe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):He(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):He(t,e)}))}}()},65:function(e,t){t.userLoginUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"/api/user/login?password=".concat(e,"&?email=").concat(t)},t.userRegisterUrl="/api/user/register",t.userChangePasswrordUrl="/api/user/changepassword",t.userChangePasswordWithRestCode="/api/user/restpasswordrestcode",t.useruploadshfits="/api/user/uploadshifts",t.userRequestRestCode="/api/user/createrestpasswordcode",t.userGetChatsUrl="/api/chat/getchats",t.userUpdateStyleUrl="api/user/updatestyleuser"}},[[176,1,2]]]);
//# sourceMappingURL=main.fd54f6bf.chunk.js.map