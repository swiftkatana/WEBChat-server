(this.webpackJsonpclint=this.webpackJsonpclint||[]).push([[0],{210:function(e,t,n){e.exports=n(368)},266:function(e,t){},367:function(e,t,n){},368:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(12),c=n.n(o),i=n(16),s=n(18),l=n(183),u=(n(218),n(22)),d=n(23),p=n(25),m=n(24),f=n(201),h=n(20),g=n(14),E=n.n(g),b=n(28),v=n(29),y=Object(v.b)(),w=function(e){y.location.pathname!==e?y.push(e):console.log("something try to change url",e)},k=y,O=n(184),C="https://hidden-sea-04996.herokuapp.com",N=n.n(O).a.create({baseURL:C},{headers:{"Access-Control-Allow-Origin":"*"}}),L=function(e){return function(){var t=Object(b.a)(E.a.mark((function t(n){var r,a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.post("/api/chat/getChat",{chatId:e});case 2:r=t.sent,a=r.data,console.log(a),n({type:"OPEN_CHAT",payload:a}),w("/chat");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(b.a)(E.a.mark((function t(n){var r,a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.post("/api/chat/createchat",e);case 2:r=t.sent,a=r.data,console.log(a),n({type:"CREATE_CHAT",payload:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return{type:"UPDATE_STATUS_FRIEND",payload:e}},A=function(e){return{type:"NEW_FRIEND",payload:e}},R=function(e){return function(){var t=Object(b.a)(E.a.mark((function t(n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.get("/api/user/CHATs"+e);case 2:r=t.sent,console.log(r),n({type:"FETCH_CHATS",payload:r.data});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=function(e){return function(t){N.delete("/chat/delete/".concat(e)),t({type:"DELETE_CHAT",payload:e}),setTimeout((function(){w("/")}),40)}},_=function(){return{type:"SIGN_OUT"}};var T=function(e){return{type:"CHANGE_LEGUAGE",payload:e}},x=n(427),I=n(402),D=n(403),q=n(406),U=n(407),H=n(430),P=n(432),M=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={users:[],filterUsers:[],query:"",idForTheClock:""},e.getAllUsers=Object(b.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.user&&e.props.isLogin){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,N.post("/api/user/getUserForSerach",{sender:e.props.user});case 4:n=t.sent,console.log(n),e.setState({users:n.data});case 7:case"end":return t.stop()}}),t)}))),e.onClickSendReq=function(t){N.post("/api/user/addnewfriend",{geter:t,sender:e.props.user})},e.filterUsersForSerach=function(t){var n=!0;return new RegExp("^"+e.state.query).test(t.email)||(n=!1),e.props.user._id===t._id&&(n=!1),e.props.user.friends[t._id]&&(n=!1),n},e.cancelOrStartTheClock=function(){e.state.idForTheClock&&(console.log("clear"),clearTimeout(e.state.idForTheClock),e.setState({idForTheClock:""}));var t=setTimeout((function(){var t=e.state.users.filter((function(t){return e.filterUsersForSerach(t)}));e.setState({filterUsers:t}),console.log("start")}),200);e.setState({idForTheClock:t})},e.onChangText=function(t){e.setState({query:t.target.value}),e.cancelOrStartTheClock()},e.renderUsersList=function(){return e.state.filterUsers?e.state.filterUsers.map((function(t){return a.a.createElement(x.a.Item,{key:t._id,className:"row"},a.a.createElement(I.a,null,a.a.createElement(D.a,{xs:"4"},a.a.createElement(P.a,{alt:"profile",src:t.imageProfile,style:{fontSize:30}})),a.a.createElement(D.a,{xs:"7"},a.a.createElement("p",null,"".concat(t.firstName," ").concat(t.email))),a.a.createElement(D.a,{xs:"1"},a.a.createElement(P.a,{className:"imgLeg imageAddFri",onClick:function(){return e.onClickSendReq(t)},alt:"add button",src:"addFriend.png",style:{fontSize:30}}))))})):null},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.user&&this.props.isLogin||w("/"),this.getAllUsers()}},{key:"render",value:function(){return a.a.createElement(q.a,null,a.a.createElement(U.a,{className:"mb-2 mr-sm-2"},a.a.createElement(H.a,{value:this.state.query,onChange:this.onChangText,id:"inlineFormInputGroupUsername2",placeholder:"email"}),a.a.createElement(U.a.Prepend,null,a.a.createElement(U.a.Text,null,"@"))),a.a.createElement(x.a,null,this.renderUsersList()))}}]),n}(a.a.Component),B=Object(i.b)((function(e){return{user:e.user,isLogin:e.auth.isLogin}}),{add_Friend:A})(M),G=n(132),W=n(190),V=n.n(W)()(C);var z=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).startCall=Object(b.a)(E.a.mark((function e(){var t,n,a,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.peerConnection.oniceconnectionstatechange=function(){return console.log("ICE CONNECTION STATE: ",r.peerConnection.iceConnectionState)},r.peerConnection.onicecandidate=function(e){var t=e.candidate;r.socket.emit("candidate",{room:r.room,candidate:t}),console.log("candidate generated",e.candidate)},r.peerConnection.ontrack=function(e){r.remoteVideo.srcObject=e.streams[0],console.log("REMOTE STREAMS: ",r.peerConnection.getRemoteStreams())},e.prev=3,e.next=6,navigator.mediaDevices.getUserMedia({video:{width:150,height:150},audio:!1});case 6:t=e.sent,n=Object(G.a)(t.getTracks());try{for(n.s();!(a=n.n()).done;)o=a.value,r.peerConnection.addTrack(o,t)}catch(c){n.e(c)}finally{n.f()}return r.localVideo.srcObject=t,console.log("LOCAL STREAMS: ",r.peerConnection.getLocalStreams()),e.abrupt("return",r.createOffer());case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])}))),r.createOffer=Object(b.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.peerConnection.createOffer();case 3:return t=e.sent,e.next=6,r.peerConnection.setLocalDescription(t);case 6:r.socket.emit("offer",{room:r.room,offer:t}),console.log("SENDING OFFER: ",t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),r.createAnswer=function(){var e=Object(b.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.peerConnection.onicecandidate=function(e){var t=e.candidate;r.socket.emit("candidate",{room:r.room,candidate:t}),console.log("candidate generated",e.candidate)},r.peerConnection.ontrack=function(e){r.remoteVideo.srcObject=e.streams[0]},r.peerConnection.setRemoteDescription(t).then((function(){return navigator.mediaDevices.getUserMedia({video:{width:150,height:150},audio:!1})})).then((function(e){var t,n=Object(G.a)(e.getTracks());try{for(n.s();!(t=n.n()).done;){var a=t.value;r.peerConnection.addTrack(a,e)}}catch(o){n.e(o)}finally{n.f()}return r.localVideo.srcObject=e,r.peerConnection.createAnswer()})).then((function(e){return r.peerConnection.setLocalDescription(e),e})).then((function(e){r.socket.emit("answer",{room:r.room,answer:e}),console.log("SENDING ANSWER: ",e)})).catch((function(e){return console.error(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.room="test-room",r.socket=V.connect("http://localhost:5000"),r.peerConnection=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.socket.on("connect",(function(){e.socket.emit("join",e.room,(function(t){t?console.error(t):(e.socket.on("offer",(function(t){console.log("OFFER RECEIVED: ",t),e.createAnswer(t)})),e.socket.on("candidate",(function(t){e.peerConnection.addIceCandidate(t).catch((function(e){return console.error(e)})),console.log("CANDIDATE RECEIVED",t)})),e.socket.on("answer",(function(t){console.log("ANSWER RECEIVED:",t),e.peerConnection.setRemoteDescription(t)})))}))}))}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("h1",null,"Webrtc"),a.a.createElement("div",null,a.a.createElement("button",{onClick:this.startCall},"CALL")),a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("div",null,a.a.createElement("video",{id:"localVideo",autoPlay:!0,muted:!0,playsInline:!0,ref:function(t){return e.localVideo=t}}),a.a.createElement("p",null,"LOCAL VIDEO")),a.a.createElement("div",null,a.a.createElement("video",{id:"remoteVideo",autoPlay:!0,muted:!0,playsInline:!0,ref:function(t){return e.remoteVideo=t}}),a.a.createElement("p",null,"REMOTE VIDEO"))))}}]),n}(a.a.Component),X=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={},e.renderChat=function(){return e.props.chatArea.openChat._id?a.a.createElement(z,{ENDPOINT:C,chat:e.props.chatArea.openChat,user:e.props.user}):a.a.createElement("h1",null,"error please go back")},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return this.renderChat()}}]),n}(a.a.Component),K=Object(i.b)((function(e){return{chatArea:e.chatArea,user:e.user,isLogin:e.auth.isLogin}}),{})(X),Y=n(57),Z=n(203),J=n(26),$=n(6),Q=n(408),ee=n(40),te=n(425),ne=n(411),re=n(412),ae=n(413),oe=n(418),ce=n(104),ie=n(417),se=n(414),le=n(191),ue=n.n(le),de=n(192),pe=n.n(de),me=n(193),fe=n.n(me),he=n(433),ge=n(409),Ee=n(410),be=n(416),ve=Object(Q.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{alignItems:"center",width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(6)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(J.a)(Object(J.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(2),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}));var ye=Object(i.b)((function(e){return{user:e.user,isLogin:e.auth.isLogin,leg:e.leg}}),{changeLeg:T,createCHAT:S,openChat:L,deleteChat:F,fetchChats:R,signOut:_})((function(e){var t=ve(),n=Object(ee.a)(),r=a.a.useState(!0),o=Object(Z.a)(r,2),c=o[0],i=o[1],s=document.querySelector("body");s.addEventListener("touchstart",(function(e){l=e.touches[0].clientX,u=e.touches[0].clientY}),!1),s.addEventListener("touchmove",(function(e){if(null===l)return;if(null===u)return;var t=e.touches[0].clientX,n=e.touches[0].clientY,r=l-t,a=u-n;Math.abs(r)>Math.abs(a)&&(r>0?p():d());l=null,u=null,e.preventDefault()}),!1);var l=null,u=null,d=function(){i(!0)},p=function(){i(!1)};return a.a.createElement("div",{className:t.root},a.a.createElement(ne.a,null),a.a.createElement(re.a,{position:"fixed",className:Object($.a)(t.appBar,Object(Y.a)({},t.appBarShift,c))},a.a.createElement(ae.a,null,a.a.createElement(ce.a,{variant:"h6",noWrap:!0}),a.a.createElement(se.a,{color:"inherit","aria-label":"open drawer",onClick:d,edge:"start",className:Object($.a)(t.menuButton,c&&t.hide)},a.a.createElement(ue.a,null)))),a.a.createElement(te.a,{className:t.drawer,variant:"persistent",anchor:"left",open:c,classes:{paper:t.drawerPaper}},a.a.createElement("div",{className:t.drawerHeader},a.a.createElement(se.a,{onClick:p},"ltr"===n.direction?a.a.createElement(pe.a,null):a.a.createElement(fe.a,null))),a.a.createElement(be.a,{variant:"contained",id:"CWE",onClick:function(){if("/"===k.location.pathname)return null;w("")}},"CWE"),a.a.createElement(ie.a,null),a.a.createElement(oe.a,null,e.isLogin?a.a.createElement(a.a.Fragment,null,a.a.createElement(he.a,{onClick:function(){return w("/profile")},button:!0,key:"profile buuton"},a.a.createElement(ge.a,null,a.a.createElement("img",{className:"fa fa-plus-circle",src:e.user.imageProfile,alt:"profile button"})," "),a.a.createElement(Ee.a,{primary:e.user.firstName})),a.a.createElement(he.a,{onClick:function(){w("/"),e.signOut()},button:!0,key:"LogOut buuton"},a.a.createElement(ge.a,null,a.a.createElement("img",{className:"fa fa-plus-circle",src:"logOut.png",alt:"logOut button"})," "),a.a.createElement(Ee.a,{primary:"LogOut"}))):a.a.createElement(he.a,{onClick:function(){w("/"),e.signOut()},button:!0,key:"login buuton"},a.a.createElement(ge.a,null,a.a.createElement("img",{className:"fa fa-plus-circle",src:"login.png",alt:"login button"})," "),a.a.createElement(Ee.a,{primary:"Login \\ register"})),a.a.createElement(ie.a,null)),a.a.createElement(oe.a,null,e.isLogin&&e.user?a.a.createElement(a.a.Fragment,null,a.a.createElement(he.a,{onClick:function(){return w("addFrind")},button:!0,key:"addFrind"},a.a.createElement(ge.a,null,a.a.createElement("img",{className:"fa fa-plus-circle",src:"serachF.png",alt:"addFrind button"})," "),a.a.createElement(Ee.a,{primary:"Serach A Frined"})),a.a.createElement(he.a,{onClick:function(){return w("friends.list")},button:!0,key:"friends.list"},a.a.createElement(ge.a,null,a.a.createElement("img",{className:"fa fa-plus-circle",src:"friendsList.png",alt:"friends.list button"})," "),a.a.createElement(Ee.a,{primary:"friends list"}))):null,a.a.createElement(ie.a,null)),a.a.createElement(oe.a,null,e.isLogin&&e.user?Object.keys(e.user.friends).length<0?null:Object.values(e.user.friends).map((function(t,n){return"accept"===t.status?a.a.createElement(he.a,{onClick:function(){return n=t.chatId,void e.openChat(n);var n},button:!0,key:t._id},a.a.createElement("img",{src:t.imageProfile,alt:"profile "}),a.a.createElement(Ee.a,{primary:"".concat(t.firstName," ").concat(t.lastName)})):null})):null,a.a.createElement(ie.a,null))),a.a.createElement("main",{className:Object($.a)(t.content,Object(Y.a)({},t.contentShift,c))},a.a.createElement("div",{className:t.drawerHeader}),e.children))})),we=n(423),ke=n(431),Oe=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={show:!1,whatKind:"",body:"",lastFriendReq:{},newReqSound:new Audio("newReq.mp3"),id:""},e.setListenerSocket=function(){!e.state.id&&e.props.isLogin&&e.props.user?(V.on("connect",(function(){console.log("connect to socket"),V.on("newFriendReq"+e.props.user._id,(function(t){console.log("friend"),"sender"===t.status&&(e.state.newReqSound.play(),e.setState({lastFriendReq:t,show:!0,whatKind:"newFriendreq",body:t.firstName+" "+t.lastName})),e.props.add_Friend(t)})),V.on("FirendsReqAccept"+e.props.user._id,(function(t){"accept"===t.status&&(e.state.newReqSound.play(),e.setState({lastFriendReq:t,show:!0,whatKind:"newFriendreq",body:t.firstName+" "+t.lastName})),console.log("accept"),e.props.updatefriend({_id:t._id,status:"accept",chatId:t.chatId,user:t})})),V.on("deleteFriend"+e.props.user._id,(function(t){console.log("delete"),e.props.deleteFriend(t)})),V.on("declineFriendReq"+e.props.user._id,(function(t){console.log("decline"),e.props.deleteFriend(t)})),V.on("blockFriendReq"+e.props.user._id,(function(t){console.log("block"),e.props.updatefriend({_id:t._id,user:t,status:"decline"})})),V.on("error"+e.props.user._id,(function(t){console.log(t),e.setState({show:!0,whatKind:"error",header:"error",body:t})})),V.on("show",(function(e){alert(e)}))})),e.setState({id:e.props.user._id})):!e.state.id||e.props.isLogin||e.props.user||(console.log("off"),V.disconnect(),e.setState({id:""}))},e.onClickDeclineReq=function(t){e.setState({show:!1}),N.post("/api/user/declineFriendReq",{sender:e.props.user,geter:t})},e.onClickAcceptReq=function(){var t=Object(b.a)(E.a.mark((function t(n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({show:!1}),t.next=3,N.post("/api/user/friendreqaccept",{accepter:e.props.user,sender:n});case 3:r=t.sent,console.log(r),alert(r.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onShowOrHide=function(){e.setState({show:!e.state.show})},e.renderModal=function(){if(!e.state.show)return null;var t,n,r,o,c,i;switch(e.state.whatKind){case"error":o="close",c="error",i=e.state.body,n=function(){return e.onShowOrHide()};break;case"newFriendReq":console.log(e.state.lastFriendReq),r="Accept",o="Decline",c="you got new friend request",i="your new friend request send from ".concat(e.state.body," "),t=function(){e.onClickAcceptReq(e.state.lastFriendReq)},n=function(){e.onClickDeclineReq(e.state.lastFriendReq)};break;case"friendReqAccept":o="close",c="you Got Accept",i=" ".concat(e.state.body," accept your friend request \ud83d\ude0e "),n=function(){return e.onShowOrHide()}}return a.a.createElement(we.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:e.state.show,onHide:e.onShowOrHide},a.a.createElement(we.a.Header,{closeButton:!0},a.a.createElement(we.a.Title,null,c)),a.a.createElement(we.a.Body,null,i),a.a.createElement(we.a.Footer,null,r?a.a.createElement(ke.a,{variant:"secondary",onClick:t},r):null,o?a.a.createElement(ke.a,{variant:"danger",onClick:n},o):null))},e}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){this.setListenerSocket()}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,this.renderModal())}}]),n}(a.a.Component),Ce=Object(i.b)((function(e){return{isLogin:e.auth.isLogin,user:e.user}}),{add_Friend:A,updatefriend:j,deleteFriend:function(e){return{type:"DELETE_FRIEND",payload:e}}})(Oe),Ne=n(426),Le=n(424),Se=n(419),je={eng:{login:{buttonForLogin:"Press For Login",leabel:"Login",button:"Login"},register:{buttonForRegister:"Press For Sign up",leabel:"Sign up",button:"Register"},email:{error:"Invalid email",leabel:"Email"},password:{error:"Your password must include at least 8 characters. At least 1 number And upper case  (like AWDS).  ",leabel:"Password"},firstName:{error:"You must enter a first name without numbers and contain at least 2 characters",leabel:"FirstName"},lastName:{error:"You must enter a last name without numbers and contain at least 2 characters",leabel:"LastName"},address:{error:"Need to enter full address city street number house",leabel:"full address"},phone:{error:"Need to enter phone number",leabel:"phone number"}},heb:{login:{buttonForLogin:"\u05dc\u05d7\u05e5 \u05db\u05d0\u05df \u05dc\u05d4\u05ea\u05d7\u05d1\u05e8",leabel:"\u05dc\u05d4\u05ea\u05d7\u05d1\u05e8 \u05dc\u05d0\u05ea\u05e8",button:"\u05dc\u05d4\u05ea\u05d7\u05d1\u05e8"},register:{buttonForRegister:"\u05dc\u05d7\u05e5 \u05db\u05d0\u05df \u05dc\u05d4\u05e8\u05e9\u05dd",leabel:"\u05d4\u05e8\u05e9\u05de\u05d4 \u05dc\u05d0\u05ea\u05e8",button:"\u05dc\u05d4\u05d9\u05e8\u05e9\u05dd"},email:{error:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05d4\u05d9\u05e0\u05d5 \u05ea\u05e7\u05d9\u05df",leabel:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc"},password:{error:"\u05d5\u05e1\u05e4\u05e8\u05d5\u05ea (A-Z)\u05d5\u05ea\u05d5 \u05d2\u05d3\u05d5\u05dc (a-z)  \u05e2\u05dc \u05d4\u05e1\u05d9\u05e1\u05de\u05d4 \u05dc\u05d4\u05d9\u05d5\u05ea \u05de\u05d9\u05e0\u05d9\u05de\u05d5\u05dd 7 \u05ea\u05d5\u05d5\u05d9\u05dd \u05d5\u05dc\u05d4\u05db\u05d9\u05dc \u05ea\u05d5\u05d5\u05d9\u05dd  ",leabel:"\u05e1\u05d9\u05e1\u05de\u05d4"},firstName:{error:"\u05e6\u05e8\u05d9\u05da \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05e9\u05dd \u05e4\u05e8\u05d8\u05d9 \u05d1\u05dc\u05d9 \u05de\u05e1\u05e4\u05e8\u05d9\u05dd \u05d5\u05dc\u05d4\u05db\u05d9\u05dc 2 \u05ea\u05d5\u05d5\u05d9\u05dd \u05dc\u05e4\u05d7\u05d5\u05ea",leabel:"\u05e9\u05dd \u05e4\u05e8\u05d8\u05d9"},lastName:{error:"\u05e6\u05e8\u05d9\u05da \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4 \u05d1\u05dc\u05d9 \u05de\u05e1\u05e4\u05e8\u05d9\u05dd \u05d5\u05dc\u05d4\u05db\u05d9\u05dc 2 \u05ea\u05d5\u05d5\u05d9\u05dd \u05dc\u05e4\u05d7\u05d5\u05ea",leabel:"\u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4"},address:{error:"\u05e6\u05e8\u05d9\u05da \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05db\u05ea\u05d5\u05d1\u05ea \u05de\u05dc\u05d0\u05d4 \u05e2\u05d9\u05e8 \u05e8\u05d7\u05d5\u05d1 \u05de\u05e1\u05e4\u05e8 \u05d1\u05d9\u05ea",leabel:"\u05db\u05ea\u05d5\u05d1\u05ea \u05de\u05dc\u05d0\u05d4"},phone:{error:"\u05e6\u05e8\u05d9\u05da \u05dc\u05d4\u05db\u05e0\u05d9\u05e1 \u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df",leabel:"\u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df"}}},Ae=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={whatToShow:!0,emailError:""},r.onSubmitR=function(e){r.props.createUser(e,r.props.signIn,r.props.openChat)},r.onSubmitL=function(e){r.props.loginUser(e,r.props.signIn,r.props.openChat)},r.renderError=function(e){var t=e.error,n=e.touched;if(t&&n)return a.a.createElement("div",{className:"alert alert-danger"},a.a.createElement("div",{className:"header"},t))},r.renderInput=function(e){var t=e.text,n=e.input,o=e.bg,c=e.type,i=e.label,s=e.meta,l=e.placeholder,u="".concat(o?"mb-3":"col-md-6 mb-3","  ").concat((s.error&&s.touched,"")),d=c||"text";return a.a.createElement("div",{className:u},a.a.createElement("label",{htmlFor:i},"  ",i),t?a.a.createElement("input",Object.assign({},n,{type:d,name:i,autoComplete:"on",placeholder:l,value:t,className:"form-control  ".concat(s.error&&s.touched?"alert alert-danger":""),required:""})):a.a.createElement("input",Object.assign({},n,{name:i,autoComplete:"on",type:d,placeholder:l,className:"form-control  ".concat(s.error&&s.touched?"alert alert-danger":""),required:""})),r.renderError(s))},r.renderChangeMod=function(){return r.state.whatToShow?a.a.createElement("div",{className:"btn-group "},a.a.createElement("h1",{className:"btn btn-success  ",type:"button",onClick:function(){return r.setState({whatToShow:!1})}},je[r.props.leg].register.buttonForRegister)):a.a.createElement("div",{className:"btn-group   "},a.a.createElement("h1",{className:"btn btn-success",type:"button",onClick:function(){return r.setState({whatToShow:!0})}},je[r.props.leg].login.buttonForLogin))},r.renderImgLeg=function(){return"eng"===r.props.leg?a.a.createElement("img",{src:"heb.png",onClick:function(){return r.props.changeLeg("heb")},className:"imgLeg",alt:"icon for change leg right now hebrew"}):a.a.createElement("img",{src:"uk.png",onClick:function(){return r.props.changeLeg("eng")},className:"imgLeg",alt:"icon for change leg right now eng"})},r.checkbox=a.a.createRef(),r}return Object(d.a)(n,[{key:"onCheacBox",value:function(){var e=this.checkbox.current.value;this.setState({whatToShow:"register"}),e||this.setState({whatToShow:"login"})}},{key:"renderErrorLogin",value:function(){if(this.props.user&&"not found"===this.props.user)return a.a.createElement("p",{className:"emaildup"},"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05d0\u05d5 \u05d4\u05e1\u05d9\u05e1\u05de\u05d4 \u05dc\u05d0 \u05e0\u05db\u05d5\u05e0\u05d9\u05dd")}},{key:"renderErrorRegister",value:function(e){if(this.props.user&&"dup"===this.props.user)return a.a.createElement("p",{className:"emaildup"},"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05e7\u05d9\u05d9\u05dd \u05db\u05d1\u05e8 ")}},{key:"login",value:function(){return a.a.createElement("div",{className:"form-group ".concat("eng"===this.props.leg?"textLeft":"textRight")},a.a.createElement("h1",null,je[this.props.leg].login.leabel,"  "),this.renderChangeMod(),a.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmitL),className:"error"},a.a.createElement(Ne.a,{bg:!0,type:"email",autocomplete:"current-password",name:"email",component:this.renderInput,label:je[this.props.leg].email.leabel}),a.a.createElement(Ne.a,{bg:!0,type:"password",name:"password",component:this.renderInput,label:je[this.props.leg].password.leabel}),this.renderErrorLogin(),a.a.createElement("button",{className:"btn btn-info form-control"},je[this.props.leg].login.button," ")))}},{key:"register",value:function(){return a.a.createElement("div",{className:"form-group ".concat("eng"===this.props.leg?"textLeft":"textRight")},a.a.createElement("h1",{className:"eng"===this.props.leg?"textLeft":"textRight"},je[this.props.leg].register.leabel," "),this.renderChangeMod(),a.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmitR),className:"error"},a.a.createElement("div",{className:"row"},a.a.createElement(Ne.a,{type:"email",clas:"dup"===this.props.user?"error":null,name:"email",placeholder:" you@example.com",component:this.renderInput,label:je[this.props.leg].email.leabel}),a.a.createElement(Ne.a,{type:"password",name:"password",component:this.renderInput,label:je[this.props.leg].password.leabel})),a.a.createElement("div",{className:"row"},a.a.createElement(Ne.a,{name:"firstName",component:this.renderInput,label:je[this.props.leg].firstName.leabel}),a.a.createElement(Ne.a,{name:"lastName",component:this.renderInput,label:je[this.props.leg].lastName.leabel})),a.a.createElement("div",{className:"row"}),this.renderErrorRegister(),a.a.createElement("div",{className:"row"},a.a.createElement("button",{className:"btn btn-info form-control"},je[this.props.leg].register.button," "))))}},{key:"renderLoginOrRegister",value:function(){return this.state.whatToShow?this.login():this.register()}},{key:"render",value:function(){return a.a.createElement(q.a,{className:" text-right"},this.renderLoginOrRegister(),a.a.createElement(Se.a,{color:"primary","aria-label":"add"},this.renderImgLeg()))}}]),n}(a.a.Component);var Re=Object(Le.a)({form:"userLogin",validate:function(e,t){var n,r={};return!1===(n=e.email,/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n))&&(r.email=je[t.leg].email.error),!1===function(e){if(void 0===e||null===e)return!1;return!!(e.match(/[0-9]/g)&&e.match(/[A-Z]/g)&&e.match(/[a-z]/g)&&e.length>=7)}(e.password)&&(r.password=je[t.leg].password.error),(!e.firstName||e.firstName<=2||/[0-9]/.test(e.firstName))&&(r.firstName=je[t.leg].firstName.error),(!e.lastName||e.lastName<=2||/[0-9]/.test(e.lastName))&&(r.lastName=je[t.leg].lastName.error),(!e.address||e.address<=8||!/[0-9]/.test(e.address))&&(r.address=je[t.leg].address.error),(!e.phone||e.phone<=7)&&(r.phone=je[t.leg].phone.error),r}})(Ae),Fe=Object(i.b)((function(e){return{isLogin:e.auth.isLogin,user:e.user,leg:e.leg}}),{signIn:function(e){return{type:"SIGN_IN",payload:e}},signOut:_,createUser:function(e,t){return function(){var n=Object(b.a)(E.a.mark((function n(r){var a;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.post("/register",e);case 2:a=n.sent,console.log(a),r({type:"CREATE_USER",payload:a.data}),"eror"!==a.data&&"dup"!==a.data&&t(a.data._id);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},loginUser:function(e,t){return function(){var n=Object(b.a)(E.a.mark((function n(r){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.post("/login",e).then((function(e){r({type:"LOGIN",payload:e.data}),"eror"!==e.data&&"not found"!==e.data&&"not good"!==e.data&&t(e.data._id)})).catch((function(e){console.log(e)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},openChat:L,changeLeg:T})(Re),_e=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={},e.renderRegisterORHomePage=function(){return e.props.isLogin&&e.props.user?a.a.createElement("div",null,a.a.createElement("h1",null,"Main page")):a.a.createElement(Fe,null)},e}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return a.a.createElement(q.a,null,this.renderRegisterORHomePage())}}]),n}(a.a.Component),Te=Object(i.b)((function(e){return{user:e.user,isLogin:e.auth.isLogin}}),{})(_e),xe=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).renderName=function(){return e.props.user&&e.props.isLogin?e.props.user.firstName:null},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.user&&this.props.isLogin||w("/")}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Hello ",this.renderName()," "))}}]),n}(a.a.Component),Ie=Object(i.b)((function(e){return{isLogin:e.auth.isLogin,user:e.user}}),{})(xe),De=n(428),qe=n(420),Ue=n(200),He=n.n(Ue),Pe=n(421),Me=n(422),Be=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={},e.renderFriendsList=function(){return e.props.isLogin&&e.props.user?a.a.createElement("div",null,a.a.createElement("h3",null,"Friends List  ",a.a.createElement("span",{"aria-labelledby":"img",role:"img"},"\ud83e\udd1d")),e.renderUsersList(["accept","iaccept"]),a.a.createElement("h3",null,"Pending friends List ",a.a.createElement("span",{"aria-labelledby":"img",role:"img"},"\ud83d\ude48\ud83d\ude49\ud83d\ude4a")," "),e.renderUsersList(["waiting","sender"]),a.a.createElement("h3",null,"Black List ",a.a.createElement("span",{"aria-labelledby":"img",role:"img"},"\ud83d\udc80")),e.renderUsersList(["iblock"])):a.a.createElement("h1",null,"Please logIng Or Register")},e.onClickAcceptReq=function(t){N.post("/api/user/friendreqaccept",{accepter:e.props.user,sender:t})},e.onclickDeletefriend=function(t){console.log("delete"),N.post("/api/user/deletefriendreq",{sender:e.props.user,geter:t})},e.onclickBlockfriend=function(t){N.post("/api/user/blockfriendreq",{sender:e.props.user,geter:t})},e.onClickDeclineFriend=function(t){N.post("/api/user/declineFriendReq",{sender:e.props.user,geter:t})},e.onUnblockAfriend=function(t){N.post("/api/user/unblockFirend",{sender:e.props.user,geter:t})},e.onOpenChat=function(t){e.props.openChat(t)},e.renderBuutonChatOrAccept=function(t){if(!t)return null;switch(t.status){case"waiting":return a.a.createElement(De.a,{title:"waiting for the person to aceept"},a.a.createElement("p",null,"waiting"));case"sender":return a.a.createElement(qe.a,{key:t._id,item:!0},a.a.createElement(De.a,{onClick:function(){return e.onClickAcceptReq(t)},key:"Accept",title:"Accept the requst"},a.a.createElement(be.a,null,"Accept")),a.a.createElement(De.a,{onClick:function(){return e.onClickDeclineFriend(t)},key:"Decline",title:"decline the requst"},a.a.createElement(be.a,null,"decline")));case"iblock":return a.a.createElement(qe.a,{key:t._id,item:!0},a.a.createElement(De.a,{onClick:function(){return e.onUnblockAfriend(t)},key:"unblockbtn",title:"unblock a friend"},a.a.createElement(be.a,null,"unblock")),a.a.createElement(De.a,{onClick:function(){return e.onclickDeletefriend(t)},key:"delete",title:"delete friend"},a.a.createElement(Pe.a,{className:"imgLeg imageAddFri"},"Delete")));default:return a.a.createElement(qe.a,{key:t._id,item:!0},a.a.createElement(De.a,{key:"open chat",onClick:function(){return e.onOpenChat(t.chatId)},title:"Open Chat"},a.a.createElement(He.a,{className:"imgLeg imageAddFri"})),a.a.createElement(De.a,{onClick:function(){return e.onclickBlockfriend(t)},key:"block",title:"Block friend"},a.a.createElement(Me.a,{className:"imgLeg imageAddFri"},"Block")),a.a.createElement(De.a,{onClick:function(){return e.onclickDeletefriend(t)},key:"delete",title:"delete friend"},a.a.createElement(Pe.a,{className:"imgLeg imageAddFri"},"Delete")))}},e.renderUsersList=function(t){return e.props.isLogin&&e.props.user?Object.values(e.props.user.friends)?Object.values(e.props.user.friends).map((function(n){return-1===t.indexOf(n.status)?null:a.a.createElement(x.a.Item,{key:n._id,className:"row"},a.a.createElement(I.a,null,a.a.createElement(D.a,{xs:"4"},a.a.createElement(P.a,{alt:"profile",src:n.imageProfile,style:{fontSize:30}})),a.a.createElement(D.a,{xs:"5"},a.a.createElement("p",null,"".concat(n.firstName," ").concat(n.email))),a.a.createElement(D.a,{xs:"3"},e.renderBuutonChatOrAccept(n))))})):void 0:null},e}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){console.log("update ")}},{key:"render",value:function(){return a.a.createElement(q.a,null,this.renderFriendsList())}}]),n}(a.a.Component),Ge=Object(i.b)((function(e){return{user:e.user,isLogin:e.auth.isLogin}}),{updatefriend:j,openChat:L})(Be),We=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.isLogin?console.log():w("/")}},{key:"render",value:function(){return a.a.createElement(ye,null,a.a.createElement(Ce,null),a.a.createElement(f.a,null,a.a.createElement(h.a,{path:"/profile",exact:!0,component:Ie}),a.a.createElement(h.a,{path:"/addFrind",exact:!0,component:B}),a.a.createElement(h.a,{path:"/chat",exact:!0,component:K}),a.a.createElement(h.a,{path:"/friends.list",exact:!0,component:Ge}),a.a.createElement(h.a,{path:"/",exact:!0,component:Te})))}}]),n}(a.a.Component),Ve=Object(i.b)((function(e){return{user:e.user,isLogin:e.auth.isLogin}}),{createCHAT:S,openChat:L,deleteChat:F,fetchChats:R,signOut:_})(We),ze=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Xe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ke=n(429),Ye={isLogin:null,userId:null},Ze={chats:[],openChat:{chatId:null}},Je=Object(s.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_USER":case"LOGIN":return t.payload;case"SIGN_OUT":return null;case"NEW_FRIEND":return e.friends[t.payload._id]||(e.friends[t.payload._id]=t.payload),Object(J.a)({},e);case"UPDATE_STATUS_FRIEND":if(e.friends[t.payload._id]){var n=t.payload,r=n.user,a=n._id;e.friends[a]=r}return Object(J.a)({},e);case"DELETE_FRIEND":return e.friends[t.payload._id]&&delete e.friends[t.payload._id],Object(J.a)({},e);default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(J.a)(Object(J.a)({},e),{},{isLogin:!0,userId:t.payload});case"SIGN_OUT":return Object(J.a)(Object(J.a)({},e),{},{isLogin:!1,userId:null});default:return e}},form:Ke.a,chatArea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_CHATS":return t.payload.forEach((function(t){e.chats.push(t)})),Object(J.a)({},e);case"CREATE_CHAT":return e.chats.push(t.payload),Object(J.a)({},e);case"EDIT_CHAT":return Object(J.a)(Object(J.a)({},e),{},Object(Y.a)({},t.payload._id,t.payload));case"OPEN_CHAT":return e.openChat=t.payload,Object(J.a)({},e);default:return e}},leg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LEGUAGE":return t.payload;default:return e}}}),$e=(n(367),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||s.d),Qe=Object(s.e)(Je,$e(Object(s.a)(l.a)));c.a.render(a.a.createElement(i.a,{store:Qe},a.a.createElement(Ve,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ze?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Xe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Xe(t,e)}))}}()}},[[210,1,2]]]);
//# sourceMappingURL=main.eaae6e7b.chunk.js.map